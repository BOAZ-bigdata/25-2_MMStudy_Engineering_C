## 단일 서버
- 사용자 요청 처리 흐름
  - 사용자는 도메인 이름을 이용해 웹사이트에 접속
  - DNS가 IP주소 반환
  - IP주소로 HTTP 요청 전달
  - 웹 서버는 HTML, JSON 형태의 응답 반환
- 실제 요청이 오는 단말
  - 웹 애플리케이션
  - 모바일 앱
 
## 데이터베이스
- 관계형 데이터베이스(RDBMS)
- 비 관계형 데이터베이스(NoSQL)
  - 아주 낮은 응답 지연시간
  - 비정형 데이터
  - 아주 많은 양의 데이터
  - 데이터를 직렬화, 역질렬화 할 수 있기만 하면 됨
 
## 수직적 규모 확장 vs 수평적 규모 확장
- 스케일 업: 고사양 자원 추가
  - 한계가 있음
  - 장애에 대한 자동복구 방안이나 다중화 방안을 제시하지 않는다
- 스케일 아웃: 더 많은 서버를 추가해 성능 개선
- => 대규모 애플리케이션 지원에는 수평적 규모 확장이 적절

### 로드밸런서
- 부하 분산 집합에 속한 웹 서버들에게 트래픽 부하를 고르게 분산하는 역할
- 사용자는 로드밸런서의 공개 IP주소로 접속
- 서버 간 통신에는 사설 IP주소 이용
  - 로드밸런서와 웹서버 통신

### 데이터베이스 다중화
- 쓰기 연산은 마스터에서만 지원, 부 데이터베이스는 읽기 연산만을 지원
- 부 데이터베이스 > 주 데이터베이스 개수
- 데이터베이스 다중화의 이득
  - 더 나은 성능
  - 안정성
  - 가용성
 
## 캐시
- 캐시 계층은 데이터다 잠시 보관되는 곳으로 데이터베이스보다 훨씬 빠름
- 읽기 주도형 캐시 전략（read-through caching strategy)
- 캐시 서버는 대부분 API를 제공

### 캐시 사용 시 주의할 점
- 캐시는 어떤 상황에 바람직한가?
- 어떤 데이터를 캐시에 두어야 하는가?
- 캐시에 보관된 데이터는 어떻게 만료(expire)되는가?
- 일관성(consistency)
- 장애에는 어떻게 대처할 것인가?
- 캐시 메모리는 얼마나 크게 잡을 것인가?
- 데이터 방출(eviction) 정책은 무엇인가?

## 콘텐츠 전송 네트워크(CDN)
- 정적 콘텐츠 전송에 쓰이는 지리적으로 분산된 서버 네트워크
- 사용자에게 가장 가까운 CDN 서버가 정적 콘텐츠 전달
- 한번 서버에서 가져온 이미지는 캐시 -> 만료되지 않은 이미지 요청은 캐시를 통해 처리

## 무상태（stateless） 웹 계층
- 상태정보를 웹 계층에서 제거
- 상태 정보를 관계형 데이터베이스나 NoSQL 같은 지속성 저장소에 보관, 필요할 때 가져오는 것
### 상태 정보 의존적인 아키텍처
- 클라이언트 정보(상태)를 유지하여 요청을 사이에 공유되도록 하는 것
- 같은 클라이언트로부터의 요청은 항상 같은 서버로 전송되어야 한다는 것이 단점
### 무상태 아키텍처
- 사용자로부터의 HTTP요청은 어떤 웹 서버로도 전달될 수 있다
- 상태 정보가 필요한 경우 공유 저장소로부터 데이터를 가져온다


## 데이터 센터
- 사용자는 장애가 없다면 가장 가까운 데이터 센터로 안내(geoDNS-routing)
- 다중 데이터센터 아키텍처의 난제: 트래픽 우회, 데이터 동기화, 테스트와 배포

## 메시지 큐
- 메시지의 무손실을 보장하는 비동기 통신을 지원하는 컴포넌트
- 생산자가 메시지를 만들어 메시지 큐에 발행
- 메시지 큐에서 소비자가 메시지를 받아 그에 맞는 동작을 수행
- 규모 확장성이 보장되어야 하는 안정적 애플리케이션을 구성하기 좋다

## 로그,메트릭 그리고 자동화
- 로그: 에러 로그 모니터링
- 메트릭
  - 호스트 단위 메트릭
  - 종합 메트릭
  - 핵심 비즈니스 매트릭
- 자동화: 지속적 통합,빌드,테스트,배포 절차 자동화

## 데이터베이스의 규모 확장
- 수직적 확장
- 수평적 확장(샤딩)
  - 대규모 데이터베이스를 샤드(shard)로 부르는 작은 단위로 분할하는 기술
  - 같은 스키마를 쓰지만 보관 데이터 사이에는 중복이 없다
  - 샤딩 키를 어떻게 정하느냐가 중요
