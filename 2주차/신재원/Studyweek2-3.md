열 지향 스토리지에 의한 고속화

메모리에 다 올라가지 않을 정도의 대량의 데이터를 신속하게 집계하려면 미리 데이터를 집게에 적합한 형태로 변환하는 것이 필요하다. 이 절에서는 집계 효율이 높은 데이터 베이스의 구조를 살펴본다. 

 

데이터베이스의 지연을 줄이기 
데이터양이 증가함에 따라 집계에 따라 걸리는 시간은 길어진다. 몇 초안에 끝나는 상황이라면 신경 쓰지 않지만, 데이터 집게에 몇 분이나 기다리게 된다면 작업 효율은 그 이상으로 악화된다. 대기 시간이 늘어나면 작업을 멈추거나 대기 후에 여러 작업을 병행하게 된다. 

 

초 단위로 데이터를 집계하려면 처음부터 그것을 예상해서 시스템을 마련해야 한다. 데이터 수집 단게에서는 거기까지는 생각하지 않기 때문에 주로 3계층의 시스템 (데이터 레이크 -> 데이터 마트 -> 시각화 도구) 을 만든다. 

 
데이터 처리의 지연 
일반적으로 데이터 처리의 응답이 빠르다는 표현을 대기 시간(Latency)이 적다 고 한다.

 
압축과 분산에 의한 지연 줄이기 - MPP 
고속화를 위해 사용되는 기법이 압축과 분산이다. 데이터를 가능한 한 작게 압축하고 그것을 여러 디스크에 분산함으로써 데이터의 로드에 따른 지연을 줄인다. 

 

분산된 데이터를 읽어들이려면 멀티 코어를 활용하면서 디스크 I/O를 병렬 처리하는 것이 효과적이다. 이러한 아키텍처를 MPP 라고 부르면 대량의 데이털르 분석하기 위해 데이터베이스에서 널리 사용중이다. 

 

열 지향 DBVS 행 지향 DB
 

행 지향 DB는 가장 전통적이고 일반적인 관계형 RDBMS 가 사용하는 방식이다. 데이터를 행 단위로 묶어서 저장한다. 

 

장점:

삽입(Insert), 수정(Update), 삭제(Delete) 작업에 유리: 새로운 행을 추가하거나 기존 행의 데이터를 변경할 때, 해당 행 전체를 한 번에 읽고 쓸 수 있어 효율적입니다.
특정 행의 모든 열을 조회할 때 빠름: 특정 레코드(행)에 대한 모든 정보(모든 컬럼)를 가져오는 쿼리(예: SELECT * FROM Customers WHERE ID = 1;)에서 성능이 좋습니다. OLTP(Online Transaction Processing)와 같이 특정 행 단위의 트랜잭션 처리가 빈번한 시스템에 적합합니다.
트랜잭션 처리(ACID 특성)에 강함: 데이터 무결성과 일관성을 유지하는 데 유리합니다.
단점:

특정 열만 조회/집계할 때 비효율적: 전체 행을 읽어오기 때문에, 필요한 특정 열의 데이터만 필요한 경우에도 불필요한 다른 열의 데이터를 함께 읽어야 합니다. 이는 디스크 I/O 낭비로 이어집니다.
분석 쿼리(OLAP)에 불리: 대량의 데이터를 스캔하여 특정 컬럼들의 합계, 평균 등을 계산하는 분석 쿼리에서는 성능이 저하됩니다.
주요 활용 분야:

일반적인 웹 애플리케이션의 데이터베이스 (사용자 정보, 게시글, 주문 내역 등)
은행 시스템, 재고 관리 시스템 등 트랜잭션 처리가 중요한 시스템
MySQL, PostgreSQL, Oracle, MS SQL Server 등 대부분의 전통적인 RDBMS
열 지향 DB 는 데이터를 열 단위로 묶어서 저장한다. 

 

장점:

분석 쿼리(OLAP)에 최적화: 특정 열에 대한 통계, 합계, 평균 등 집계 쿼리(예: SELECT AVG(나이) FROM Customers;)에서 압도적으로 빠른 성능을 보입니다. 필요한 열의 데이터만 디스크에서 읽어오기 때문에 I/O 낭비가 적습니다.
데이터 압축 효율 높음: 같은 열의 데이터들은 대부분 데이터 타입이 같고, 유사한 패턴을 가질 가능성이 높습니다. 이는 데이터 압축률을 크게 높여 저장 공간을 절약하고, 디스크에서 읽어오는 데이터 양 자체를 줄여 성능을 향상시킵니다.
대규모 병렬 처리(MPP)에 적합: 각 열이 독립적으로 저장되므로, 여러 열에 대한 쿼리를 병렬로 처리하기 용이합니다.
단점:

삽입(Insert), 수정(Update) 작업에 불리: 새로운 행을 추가하거나 기존 행의 데이터를 변경할 때, 해당 행을 구성하는 모든 열에 대해 각각 접근하여 데이터를 업데이트해야 하므로 쓰기 작업이 느립니다.
특정 행의 모든 열을 조회할 때 비효율적: 한 행의 모든 데이터를 가져오려면, 여러 개의 독립적인 컬럼 저장 영역에 접근하여 데이터를 조합해야 하므로 성능이 저하됩니다.
주요 활용 분야:

데이터 웨어하우스(Data Warehouse), 데이터 마트
비즈니스 인텔리전스(BI) 및 분석 시스템
로그 분석, 시계열 데이터 분석
Amazon Redshift, Google BigQuery, Vertica, ClickHouse 등 분석용 데이터베이스