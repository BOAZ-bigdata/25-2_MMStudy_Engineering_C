애드 혹 데이터 분석 및 BI 대시보드 

애드 혹 분석 
일회성 데이터 분석이라는 의미로 SQL 쿼리를 직접 작성해서 실행하거나 스프레드시트에서 그래프를 만드는 것까지 포함해 모든 수작업이 애드 혹 분석에 포함된다. 애드 혹 분석에서는 데이터 마트를 만들지 않는 채 데이터 레이크와 데이터 웨어하우스에 직접 연결하는 경우가 많다. 



수작업으로 데이터 분석뿐만이 아니라 정기적으로 그래프와 보고서를 만들고 싶을 때 도입하는 것이 DashBoard Tool 이다. 




확증적 데이터 분석과 탐색적 데이터 분석 p25~
데이터 분석이란 가설을 세우고 그것을 검증하는 확증적 데이터 분석과 데이터를 보면서 그 의미를 읽어내려고 하는 탐색적 데이터 분석으로 나눌 수 있다. 



스프레드시트에 의한 모니터링 p33~
데이터를 살펴보고 싶을때 이용하는 것이 '애드 혹 분석'이라면 , 보다 계획적으로 데이터의 변화를 추적해 나가는 것을 '모니터링' 이라고 한다. 예를 들어 1개월 또는 1주일마다 정기적인 일정으로 도일한 집계를 반복하여 그 추이를 점점 관측하다 보면 무슨 일이 일어나고 있는지 알 수 있다. 데이터의 집계 결과로부터 알아낸 이 값에 대해 그렇다면 어떤 조처를 해야하는 지는 분명하지 않다. 숫자의 의미를 이해하려면 그 배경에 무슨 일이 일어나고 있는가 라는 숫자로는 나타낼 수 없는 사전 지식이 필요하다.



데이터에 근거한 의사 결정 - KPI 모니터링 
프로젝트의 현황을 파악하기 위한 숫자로 업계마다 중요한 지표인 KPI (Key Performance indicator) 가 자주 이용한다. 


KPI 모니터링에서 의식하고 싶은 것은 그것이 행동 가능한 것인가 이다. 자신의 행동을 결정할 때 직감에 의지하는 것이 아니라 객관적인 데이터를 근거하여 판단하는 것을 데이터 기반 의사 결정이라고 한다. 



변화를 파악하고 세부 사항을 이해하기 - BI 도구 활용 
데이터 의 움직임을 모니터링ㅎ하기 위한 기본적인 전략은 우선 정기적인 보고를 통해 중요한 변화를 파악하는 것이다. 그리고 그 원인을 알고 싶은 경우에는 원인이 되는 데이터로 돌아와 재집계를 반복하면서 자세히 살펴보는 것이다. 



BI도구는 그것을 위한 소프트웨어이며, 데이터를 자세히 탐색할때, 그 힘을 발휘한다. 특히 '데이터 디스커버리를 위한 BI 도구' 인 경우, 적절한 데이터만 준비되면 그것을 시각화하는 것은 어려운 일이 아니다. 



문제는 항상 이상적인 데이터가 존재한다고 할 수 없다는 것이다. 원하는 대로 집계 결과를 얻으려면 시각화하기 쉬운 데이터로 만들어내는 과정이 필요하다 



수작업과 자동화 
자동화하려는 경우에는 데이터 마트를 만든다 


자주 업데이트 되는 데이터와 다수의 사람에게 공유되는 데이터등 중요성이 높은 것은 차례로 자동화해 나아간다. 시각화의 바탕이 되는 데이터를 SQL 또는 스크립트를 사용해서 생성하고 그것을 BI 도구로부터 읽어 들인다. 구체적으로는 다음과 같은 방법을 생각할 수 있다. 



1. BI 도구 -> 직접 데이터 소스에 접속 
장점 : 시스템 구성이 간단 

단점 : BI 도구 측에서 지원하지 않는 데이터 소스에 접속 불가 



2. 데이터 마트를 준비하고, 그것을 BI 도구로 부터 열기 
장점 : 어떤 테이블이라도 자유롭게 만들 수 있다. 

단점 : 데이터 마트의 설치 및 운영에 시간이 걸린다. 



3. 웹 방식의 BI 도구를 도입하여 CSV 파일 업로드 
장점 : 스크립트로 자유롭게 데이터를 가공할 수 있다 

단점 : 데이터의 생성 및 업로드에 프로그래밍이 필요하다. 



크로스 집계 p45
트랜잭션 테이블 , 크로스 테이블 , 피벗 테이블 



행과 열이 교차하는 부분에 숫자 데이터가 들어가는 테이블을 크로스 테이블(Cross Table)이라고 한다. 

크로스 테이블은 사람들이 보기 편한 보고서이지만, 데이터 베이스에서는 다루기 어려운 데이터 형식이다. 데이터 베이스에 새로운 행을 추가하는 것은 간단하지만, 열을 늘리는 것은 간단하지 않다. 



따라서 보고서의 바탕이 되는 데이터는 행 방향으로만 증가하게 되고, 열 방향으로는 데이터를 증가시키지 않도록 해야한다.

이것을 트랜잭션 테이블이라고 한다. 




트랜잭션 테이블에서 크로스 테이블로 변환하는 과정을 크로스 집계라고한다. 

피벗 테이블에 의한 크로스 집계는 간편하지만 , 데이터의 양이 너무 많으면 처리할 수 없다. 대량의 데이터를 크로스 집계하려면 SQL 을 사용하여 집계 함수를 이용하여 데이터양 감소를 고려할 필요가 있다. 



예를 들어 업무 데이터베이스에 판매 이력이 저장되어 있다면, 그 모든 것을 꺼내 크로스 집계하는 것이 아니라 먼저 SQL로 집계한다. 만일 월간 판매 이력을 알고 싶다면, 다달의 데이터를 집계한다. 바탕이 되는 데이터가 많아도 이렇게 집계하면 데이터 양이 크게 줄어든다. 



* OLAP  큐브 
OLAP 큐브는 다차원 데이터 모델링의 핵심적인 개념으로, 대량의 데이터를 여러 "관점"에서 빠르고 유연하게 분석할 수 있도록 설계된 특별한 데이터 구조입니다. 이름은 "큐브"이지만, 실제로는 3차원 이상의 "하이퍼큐브(Hypercube)" 형태를 띠는 경우가 많습니다.

1. 차원 (Dimensions)
OLAP 큐브는 데이터를 분석할 수 있는 다양한 "관점" 또는 "속성"을 차원으로 정의합니다. 각 차원은 데이터를 분류하고 그룹화하는 데 사용됩니다.

예시:
시간(Time): 연, 분기, 월, 일 등 시간의 계층 구조
제품(Product): 카테고리, 브랜드, 모델명 등 제품의 계층 구조
지역(Geography): 국가, 시/도, 도시, 매장 등 지리적 계층 구조
고객(Customer): 고객 그룹, 연령대, 성별 등 고객의 특성
판매원(Salesperson): 판매 조직, 팀, 개인 등 판매 조직의 계층 구조
각 차원은 여러 **계층(Hierarchy)**을 가질 수 있습니다. 예를 들어, 시간 차원에는 "년 > 분기 > 월 > 일"과 같은 계층이 있어서, 사용자가 원하는 세부 수준으로 데이터를 드릴다운(Drill-down)하거나 롤업(Roll-up)할 수 있게 합니다.

2. 측정값 (Measures / Facts)
큐브의 핵심은 분석하려는 수치적인 값들입니다. 이를 측정값 또는 **팩트(Fact)**라고 부릅니다. 측정값은 각 차원의 교차점에서 집계되는 데이터입니다.

예시:
총 판매액 (Sales Revenue)
판매 수량 (Quantity Sold)
이익 (Profit)
평균 주문 금액 (Average Order Value)
비용 (Cost)
이 측정값들은 대부분 합계(SUM), 평균(AVG), 개수(COUNT) 등과 같이 미리 집계된(pre-aggregated) 형태로 큐브 내에 저장됩니다.

3. 셀 (Cells)
OLAP 큐브의 가장 기본적인 단위는 **셀(Cell)**입니다. 셀은 각 차원의 특정 멤버들이 교차하는 지점에 위치하며, 해당 교차점에 해당하는 측정값(팩트)을 포함합니다.

예시: "2024년 1월, 서울 지역의 'TV' 제품 판매액"은 시간 차원의 '2024년 1월', 지역 차원의 '서울', 제품 차원의 'TV'가 교차하는 셀에 저장된 매출액 측정값이 됩니다.

4. 큐브의 형성 과정 (ETL 및 데이터 모델링)
OLAP 큐브는 일반적으로 다음과 같은 과정을 거쳐 형성됩니다.

데이터 소스 (Source Systems): CRM, ERP, 트랜잭션 데이터베이스 등 다양한 운영 시스템에서 원시 데이터가 생성됩니다.
ETL (Extract, Transform, Load) 프로세스:
추출(Extract): 운영 시스템에서 필요한 데이터를 추출합니다.
변환(Transform): 추출된 데이터를 분석에 적합한 형태로 가공합니다. 이 단계에서 정규화된 데이터를 비정규화된 형태로 변환하고, 데이터 정제, 표준화, 중복 제거, 그리고 **미리 집계(pre-aggregation)**하는 작업이 이루어집니다. 이 미리 집계 작업이 OLAP 큐브의 빠른 성능의 핵심입니다.
적재(Load): 변환된 데이터를 **데이터 웨어하우스(Data Warehouse)**에 적재합니다. 데이터 웨어하우스는 OLAP 큐브의 기반이 되는 저장소로, 주로 스타 스키마(Star Schema)나 스노우플레이크 스키마(Snowflake Schema)와 같은 비정규화된 형태로 구성됩니다.
팩트 테이블(Fact Table): 측정값(매출액, 수량 등)과 차원 테이블을 연결하는 외래 키(Foreign Key)를 포함합니다.
차원 테이블(Dimension Table): 각 차원(시간, 제품, 지역 등)에 대한 상세 정보를 포함합니다.
큐브 생성 (Cube Creation):
데이터 웨어하우스에 적재된 데이터를 기반으로 OLAP 엔진 또는 BI 툴을 사용하여 큐브를 생성합니다. 이 과정에서 차원, 측정값, 계층 구조가 정의됩니다.
특히, MOLAP(Multidimensional OLAP) 방식의 큐브는 데이터를 다차원 배열 구조로 물리적으로 저장하고, 가능한 모든 차원 조합에 대한 집계 값을 미리 계산하여 저장합니다. 이를 통해 사용자의 쿼리 시 실시간 계산 없이 빠르게 결과를 반환할 수 있습니다. (ROLAP은 관계형 데이터베이스 위에 큐브의 논리적인 뷰를 제공하며, 필요 시 관계형 데이터베이스에서 데이터를 실시간으로 집계합니다. HOLAP은 이 둘의 장점을 결합합니다.)

5. 큐브의 장점
매우 빠른 쿼리 성능: 미리 집계된 데이터 덕분에 복잡한 분석 쿼리도 거의 즉각적으로 결과를 반환합니다.
다차원 분석 용이성: 사용자가 데이터를 다양한 관점에서 자유롭게 탐색하고 드릴다운, 롤업, 슬라이싱, 다이싱, 피벗팅 등의 OLAP 연산을 수행할 수 있습니다.
사용자 친화적: 복잡한 SQL 지식 없이도 비즈니스 사용자들이 쉽게 데이터를 분석하고 인사이트를 얻을 수 있습니다.
요약하자면, OLAP 큐브는 정규화된 운영 데이터를 ETL 과정을 통해 비정규화하고, 분석에 필요한 차원과 측정값을 정의하여 다차원 배열 형태로 미리 집계하고 저장해 둔 고도로 최적화된 데이터 구조이다.