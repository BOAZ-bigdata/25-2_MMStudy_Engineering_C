## Chapter 1 ) 빅데이터 기초 지식

## 데이터 파이프라인이란?
<img width="698" height="266" alt="스크린샷 2025-07-23 오후 4 21 23" src="https://github.com/user-attachments/assets/f6d58a58-31fb-49db-8d4f-09f4a83eba10" />
 
데이터를 수집 → 처리 → 저장 → 분석까지의 과정

---

## 흐름 요약
<img width="704" height="299" alt="스크린샷 2025-07-23 오후 4 21 30" src="https://github.com/user-attachments/assets/93e0a0eb-e55f-431c-8642-a5de49da26c4" />


```java
[데이터 수집]   ← 스트림형, 배치형 
     ↓  
[데이터 레이크 (Data Lake)]  ← raw, 비정형, 대용량 저장소 (ex. S3, hdfs ) 
      ↓
[ETL / ELT 처리]  ← 데이터 파이프라인 실행 (ex. Spark, Airflow )  
     ↓  
[데이터 웨어하우스 (Data Warehouse)]  ← 통합 정형 데이터 저장소 (ex. Redshift, Snowflake)  
     ↓  
[데이터 마트 (Data Mart)]  ← 부서/주제별 최적화된 서브셋  (ex. Rds, NoSQL) 
     ↓  
[BI, 대시보드, ML, 통계 분석]  ← 사용자가 만지는 영역
```

---

## [ 데이터 수집 ]

### **1. Streaming 전송**: 데이터가 생성되자마자 실시간으로 전송 (Kafka, Webhook 등)

- 유저가 주문 → 실시간으로 음식점/라이더에게 전달
- 상태 변경(주문접수/조리중/픽업/배달완료) 실시간 반영

### **2. Bulk 배치 전송**: 주기적으로 파일/데이터 덩어리를 한 번에 옮김

- 매일 밤 12시에 하루 주문 내역 마케팅팀에 전달

---

## [ 데이터 처리 ]

### 1. spark ( 대용량 데이터 분산 처리 )

메모리 기반이라 서버 스펙 따르지만 빠름(  cpu - 캐시 - 메모리 - 디스크 )

### 2.  hadoop

디스크 기반 배치처리에 강함 

느리지만 쌈

### 3. Airflow

DAG 기반으로 ETL 작업 순서를 자동화/스케줄링

1. hadoop ( 배치 ) - 디스크 기반이라 싸다
2. airflow ( DAG로 인한 순차처리 )

---

## [ 다양한 데이터 저장소 ]

### 1. 데이터 레이크 - 처리량 중시 ( 시간당 처리할 수 있는 양 )

가공되지 않은 데이터 그대로 저장 ( JSON, CSV, 로그, 이미지 등 **형식 무관 )**

1-1 ) 클라우드 객체 스토리지 ( s3 )

- 분산으로 두어 고가용성 제공
- 각 객체는 고유한 키 : logs/ , images/ 등을 저장

1-2 ) 온프레미스 스토리지 ( hdfs )

- 분산으로 두어 고가용성 제공
- 대용량 배치 분석 저장소

### 2. 데이터 웨어하우스 - 처리량 중시

 정형 구조로 저장하는 중앙 저장소

### 3. 데이터 마트 - 지연 중시 ( 빠른 속도의 I/O )

분석하기 쉽게 데이터 웨어하우스에서 전처리/정제한 데이터 집합

---

## Chapter 2 ) 빅데이터 탐색

메모리에 다 올리지 않을 정도의 데이터를 신속하게 집계하기 위해서, 집계에 적합한 형태로 미리 변환하는 것이 필요히다. 

데이터 마트에서 분석 쿼리를 빠르게 날리기 위해 어떤 구조와 기술이 필요한지 살펴보자.

메모리가 충분하다면, 즉 데이터가 데이터 베이스 크기보다 작다면, MySQL 이나 PostgreSQL 등 일반적인 RDB를 사용하는게 지연을 줄일 수 있는 좋은 선택이다. 

근데, RDB는 메모리가 부족하면 성능이 급격히 저하된다. 

### 어떻게 성능을 올릴 수 있는지

1. MPP 구조

고속화를 위해 데이터를 압축시키고 그것을 여러 디스크에 분산시킨다. 분산된 데이터를 읽어 들이기 위해 멀티 코어를 활용하면서 디스크 I/O를 병령 처리하는게 효과적이다. 이 아키텍쳐를 MPP라고 한다. 

1. 열 지향 저장 방식
2. 조인을 줄이기 위한 비정규화 

### MPP 의 기본적 구조

디스크상의 데이터를 최소한의 쿼리를 통해 가져오는게 지연을 줄이는 방법이다. 

열 지향 데이터베이스를 사용한다.

### 행 지향 데이터베이스
<img width="708" height="233" alt="스크린샷 2025-07-23 오후 4 21 37" src="https://github.com/user-attachments/assets/ac43dc15-5136-4c23-ba05-9345c276da25" />

- 빠른 데이터 검색을 위한 index


### 열 지향 데이터베이스
<img width="684" height="185" alt="스크린샷 2025-07-23 오후 4 21 42" src="https://github.com/user-attachments/assets/e2710e8e-d447-43e7-a18d-6156eb4c76c0" />

- 한 쿼리는 하나의 스레드에서 실행
- 개별 쿼리는 충분히 짧은 시간에 끝나므로, 분산 처리하지 않음
- 필요한 열만 고를 수 있어 데이터 분석에 많이 사용
- 한 쿼리의 실행시간이 긺
- 개별 쿼리를 다수의 작은 태스크로 분해하고 이를 병렬로 실행
    


디스크로부터 로드가 병목 현상이 발생하지 않도록 고르게 분산 되어야 한다 

→ 데이터 자체도 여러 디스크에 분산되어야하고, 각 디스크는 병렬로 테스크를 수행하여 디스크 I/O 병목을 해소해야한다.
<img width="666" height="446" alt="스크린샷 2025-07-23 오후 4 21 53" src="https://github.com/user-attachments/assets/8552baec-ddca-46cf-8b49-6a37d018064b" />
